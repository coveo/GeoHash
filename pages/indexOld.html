<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height">
    <title>Coveo Map</title>
    <link rel="shortcut icon" href="https://www.coveo.com/public/img/favicon.png">
    <link rel="stylesheet" href="./css/CoveoFullSearch.css" />
    <!--<link rel="stylesheet" href="https://labs.coveodemo.com/demo/page.css"/>-->
    <link rel="stylesheet" href="./css/coveoextension.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script class="coveo-script" src="js/CoveoJsSearch.Lazy.js"></script>
    <script src="js/coveo.googleMap.extension.js"></script>
    <script src="js/templates/templates.js"></script>
    <script src="markerclusterer.js"></script>
    <style>
        .CoveoStarRating {
          padding-top: 4px;
      }
      .CoveoFieldTable {
        margin-bottom: 1px; 
    }
      .side .title {
        font-family: Lato;
        font-size: 24pt;
        color: #009ddc;
      }
      .side .host {
        display:inline-block;
        color: gray;
      }
      .side .city, .side .state, .side .country {
        display: inline-block;
        padding-left: 15px;
        color: gray;
      }
      .side .header_info {
        font-size: 14pt;
    font-weight: bold;
      }
      .side .info {
        font-size: 11pt;
      }

      .myimage img, .image img{
        box-shadow: 1px 3px 5px 0px gray;
        width: 100%;
      }
        .myimage img {
          border-radius: 2px;
          max-height:250px;
      }
      .image img {
        border-radius: 4px;
        max-height:450px;
    }
      .image {
        float: left;
        padding: 5px;
      }
      .CoveoSearchbox {
        box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
      }
      .CoveoSearchInterface .coveo-facet-column {
        margin-right: 5px;
    }
    .coveo-modal-container.coveo-quick-view .coveo-modal-body iframe {
      height: 100%;
      width: 100%;
      position: relative;
      border: none;
      border-radius: 2px;
      padding: 10px 0 0 10px;
  }
    .CoveoSearchInterface .coveo-facet-column {
        min-width: 330px;
    }
    .result-float-right {
      float: right;
      text-align: right;
      font-size: 12px;
      position: relative;
  }
  .CoveoResultLink:hover, .CoveoResultLink:visited, a.CoveoResultLink:hover, a.CoveoResultLink:visited, .CoveoResult a.CoveoResultLink:hover, .CoveoResult a.CoveoResultLink:visited {
    text-decoration: none;
    color: #009ddc;
}
.CoveoResult a:link {
  text-decoration: none;
  font-family: Lato;
  font-size: 20px;
  color: #009ddc;
}
.CoveoResult a:visited {
  text-decoration: none;
  font-family: Lato;
  font-size: 20px;
  color: #009ddc;
}
  .related-content {
    border: none;
    border-radius: 2px;
    background-color: white;
    padding: 1px;
    margin-top: 0px;
}
.CoveoFieldTable th {
  padding: 10px 10px 0 1px;
}
    .coveo-results-column .coveo-list-layout .coveo-result-frame.movie {
      padding-left: 200px;
      min-height: 278px;
      background-size: 185px auto !important;
  }
  .coveo-results-column .coveo-list-layout .coveo-result-frame {
      padding: 10px;
      background: #ffffff;
      border-radius: 4px;
      background-repeat: no-repeat;
  }
  .coveo-results-column .coveo-list-layout.CoveoResult {
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    margin-bottom: 15px;
    /*box-shadow: 2px 2px 3px 2px rgba(0, 0, 0, 0.2);*/
    padding: 0;
    background: linear-gradient(45deg, rgba(193, 193, 193, 0.35) 0%, transparent 100%);
}
.coveo-results-column .coveo-list-layout.CoveoResult:hover {
  box-shadow: 2px 2px 3px 2px rgba(74, 100, 245, 0.2);
}
      .CoveoSearchInterface .coveo-search-section {
        max-width: 801px;
        margin: 54px auto 47px;
        padding: 0 10px;
      }
       .coveo-result-frame.movie {
          padding-left: 200px;
          min-height: 278px;
          background-size: 185px auto !important;
      }
      .coveo-result-frame {
          padding: 10px;
          background: #ffffff;
          border-radius: 2px;
          background-repeat: no-repeat;
      }
      .gm-style .gm-style-iw-c{
        max-height: 337px !important;
      }
      .RelatedTab {
        opacity: 0.6;
        background-color: rgba(232, 237, 242, 0.6);
      }
      
    .gm-style-iw-d .coveo-list-layout.CoveoResult {
      border-bottom: none !important;
      padding: 1px 0 1px 1px;
  }
  .coveo-active-category-facet-parent {
    padding-left: 10px;
}
  body .CoveoFacet, body .CoveoRecommendation, body .CoveoFacetRange, body .CoveoFacetSlider, body .CoveoHierarchicalFacet, body .CoveoCategoryFacet  {
    border-radius: 4px;
    background: #ffffff;
    box-shadow: 0 4px 15px 0 rgba(0, 0, 0, 0.03), 0 0 4px 0 rgba(0, 0, 0, 0.1);
}
.coveo-card-layout.CoveoResult, .CoveoFacetSlider, .CoveoFacetRange, .CoveoSearchButtonveoFacet, .CoveoFacet,.CoveoCategoryFacet  {
  border: none;
}
.coveo-facet-header, .coveo-recommendation-header, .coveo-category-facet-header {
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
}
body .coveo-facet-values, body .coveo-category-facet-values {
  color: #004990;
}
.CoveoOmnibox, .magic-box-suggestions.magic-box-hasSuggestion {
  box-shadow: none;
  border: none;
}
    </style>
    
    <script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCCm-i7I611b3HxtQOCt3NlMtl5-oFX9Oc" async defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var root = document.body;
            Coveo.SearchEndpoint.endpoints['default'] = new Coveo.SearchEndpoint({
                restUri: 'https://platform.cloud.coveo.com/rest/search',
                accessToken: 'xx3030617e-f7a8-467c-86d5-d700d9639730',
                //accessToken: 'xx5b469bd4-25c6-4d8b-8216-511108abef4c',
            });
            Coveo.init(root);
        })
    </script>
    <script>
      $(function() {
           /* globals Coveo */
            //Get the binding to the current resultlist.
        const GetBindings = () => {
          return Coveo.$('.coveo-results-column > .CoveoResultList').coveo('getBindings');
        };
        const $$ = Coveo.$$;
    
       /**
        * Feature result (also isTopResult)
        * Is triggered in the query pipeline > Featured Results
        */
       class MyFeatured extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyFeatured.ID);
     
           this.options = Coveo.ComponentOptions.initComponentOptions(element, MyFeatured, options);
           if (result.isTopResult) {
             const badge = this.getBadge();
             const resultFrame = $$(this.element).closest('.coveo-result-frame');
             $$(resultFrame).prepend(badge.el);
           }
         }
     
         getBadge() {
           const container = this.getBadgeContainer();
           const highlight = this.getBadgeHighlight();
           const text = this.getBadgeText();
           highlight.append(text.el);
           container.append(highlight.el);
           return container;
         }
     
         getBadgeContainer() {
           const container = $$('div', {
             className: 'custom-coveo-badge'
           });
           container.el.style.position = 'relative';
           return container;
         }
     
         getBadgeText() {
           const text = $$(
             'div',
             {
               className: 'mytextFeatured'
             },
             'Featured'
           );
           return text;
         }
     
         getBadgeHighlight() {
           const highlight = $$('div', {
             className: 'coveo-result-highlight coveo-custom-featured'
           });
     
           return highlight;
         }
       }
       MyFeatured.ID = 'MyFeatured';
       Coveo.Initialization.registerAutoCreateComponent(MyFeatured);
     
       /* globals Coveo */
       const $$$1 = Coveo.$$;
     
       /**
        * ART result
        * Is triggered when ART (Machine Learning) is kicking in
        */
       class MyART extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyART.ID);
           if (result.isRecommendation) {
             const badge = this.getBadge();
             const resultFrame = $$$1(this.element).closest('.coveo-result-frame');
             $$$1(resultFrame).prepend(badge.el);
           }
         }
     
         getBadge() {
           const container = this.getBadgeContainer();
           const highlight = this.getBadgeHighlight();
           const text = this.getBadgeText();
           highlight.append(text.el);
     
           container.append(highlight.el);
           return container;
         }
     
         getBadgeContainer() {
           const container = $$$1('div', {
             className: 'custom-coveo-badge'
           });
           container.el.style.position = 'relative';
           return container;
         }
     
         getBadgeText() {
           const text = $$$1(
             'div',
             {
               className: 'mytextART'
             },
             'ML Boost'
           );
           return text;
         }
     
         getBadgeHighlight() {
           const highlight = $$$1('div', {
             className: 'coveo-result-highlight coveo-custom-ART'
           });
     
           return highlight;
         }
       }
     
       MyART.ID = 'MyART';
       Coveo.Initialization.registerAutoCreateComponent(MyART);
     
       /* globals Coveo */
     
       /**
        * Image result
        * Shows (external) image for Result
        */
       class MyImage extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyImage.ID);
     
           let imagePath = result.raw.myimage;
           if (imagePath) {
             let imagesPerTypeMap = {
               Houses: imagePath,
               Movie: `https://image.tmdb.org/t/p/w92${imagePath}`,
               Music: `//lastfm-img2.akamaized.net/i/u/64s/${imagePath}`,
               Concert: `//images.sk-static.com/images/media/profile_images/artists/${imagePath}/large_avatar`,
               People: `https://image.tmdb.org/t/p/w66_and_h66_bestv2${imagePath}`,
               'Movie People': `https://image.tmdb.org/t/p/w66_and_h66_bestv2${imagePath}`
             };
             imagePath = imagesPerTypeMap[result.raw.mytype] || imagePath;
             if (imagePath==undefined) imagePath='';
           }
     
           let divHtml = imagePath
             ? `<div class="myimage"><img src="${imagePath}"></div>`
             : '<div class="noimage" style="width:92px;height:138px"></div>';
           Coveo.$(divHtml)
             .on('click', e => {
               $(e.target)
                 .closest('.coveo-result-frame').find('.CoveoQuickview')
                 .coveo('open');
             })
             .appendTo(element);
         }
       }
     
       MyImage.ID = 'MyImage';
       Coveo.Initialization.registerAutoCreateComponent(MyImage);
     
       //***************************
       //Image result for movie (Movie People)
       //  Shows an image from an external website. The field myimage is used as a reference
       //***************************
       class MyImageMovie extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyImageMovie.ID);
           this.element = element;
           this.options = Coveo.ComponentOptions.initComponentOptions(element, MyImageMovie, options);
           this.bindings = bindings;
           this.result = result;
           if (this.result.raw['mymovieimg']) {
             let imagePath = this.result.raw['mymovieimg'];
             imagePath = `https://image.tmdb.org/t/p/w92${imagePath}`;
             Coveo.$(`<img src="${imagePath}">`)
               .on('click', e => {
                 window.location = 'https://www.themoviedb.org/movie/' + this.result.raw['mymovieid'];
               })
               .appendTo(this.element);
           }
         }
       }
     
       MyImageMovie.ID = 'MyImageMovie';
       Coveo.CoveoJQuery.registerAutoCreateComponent(MyImageMovie);
     
       /* globals Coveo */
     
       /**
        * MyBackground result
        * Shows image/color background gradient on the result template
        */
       class MyBackground extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyBackground.ID);
           this.result = result;
           this.element = element;
           this.options = Coveo.ComponentOptions.initComponentOptions(element, MyBackground, options);
           if (this.options.showPoster) {
             this.addImage();
           }
           let colors = result.raw.mycolors;
           if (colors) {
             this.addColors(colors);
           } else {
             this.addTopBorder(element);
           }
         }
     
         addImage() {
           let url = this.result.raw.myimage;
           let imagesPerTypeMap = {
             Movie: `https://image.tmdb.org/t/p/w185_and_h278_bestv2/${url}`,
             Houses: `${url}`,
             Music: `//lastfm-img2.akamaized.net/i/u/174s/${url}`,
             Concert: `//images.sk-static.com/images/media/profile_images/artists/${url}/large_avatar`,
             People: `https://image.tmdb.org/t/p/w138_and_h175_face${url}`,
             'Movie People': `https://image.tmdb.org/t/p/w138_and_h175_face${url}`
           };
     
           let imageUrl = imagesPerTypeMap[this.result.raw.mytype];
           if (imageUrl && !url) {
             // right type (Movie, Music, Concert) but a specific image wasn't set.
             imageUrl = 'https://elastic.coveodemo.com/icons/noimage-nofill.png';
           }
           if (!imageUrl) {
             return;
           }
           if (this.options.showUser) {
             $(this.element)
               .closest('.coveo-result-frame')
               .css('background-image', `url(${imageUrl})`)
               .on('click', e => {
                 if (e.target.className == 'coveo-result-frame people') {
                   var internal = false;
                   if (this.result.raw.mytype === 'People') {
                     internal = true;
                   }
                   document.showUser(this.result.raw.sfcontactemail, internal);
                   return false;
                 }
               });
           } else {
             $(this.element)
               .closest('.coveo-result-frame')
               .css('background-image', `url(${imageUrl})`)
               .on('click', e => {
                 $(e.target)
                   .find('.CoveoQuickview')
                   .coveo('open');
               });
           }
         }
     
         addColors(colors) {
           colors = colors.split(' ');
           if (colors.length) {
             let i = 0;
             // make sure we have at least 5 colors, by repeating previous colors when array is short.
             while (colors.length < 5) {
               colors.push(colors[i++]);
             }
             colors = colors.map((c, idx) => {
               let trans = 0.05;
               if (/*userIdToAdd.sel == 'Anonymous' && */ this.options.showPoster) {
                 trans = 0.2;
               }
     
               let t = ((5 - idx) * trans).toFixed(2);
               return c.replace('(', 'rgba(').replace(')', `,${t})`); // add transparency
             });
     
             let gradient = `linear-gradient(to right, ${colors[0]}, ${colors[1]}), radial-gradient(circle, ${colors[2]}, ${colors[3]}, ${
             colors[4]
           })`;
     
             if (this.options.showPoster) ;
     
             this.addTopBorder(this.element, gradient);
           }
         }
     
         /**
          * Sets the baackground gradient on a border
          * @param {domElement} element
          * @param {string?} gradient (optional) CSS for background's gradient
          */
         addTopBorder(element, gradient) {
           let backgroundGradient = gradient || 'linear-gradient(45deg, rgba(193,193,193,0.35) 0%,rgba(0,0,0,0) 100%)'; // gradient or default.
           $(element)
             .closest('.CoveoResult')
             .prepend('<div class="TopBorder"></div>')
             .css('background', backgroundGradient);
         }
       }
     
       MyBackground.ID = 'MyBackground';
       MyBackground.options = {
         showPoster: Coveo.ComponentOptions.buildBooleanOption({ defaultValue: false }),
         showUser: Coveo.ComponentOptions.buildBooleanOption({ defaultValue: false })
       };
       Coveo.Initialization.registerAutoCreateComponent(MyBackground);
     
       /* globals Coveo */
       /**
        * Details and Related
        * Shows tabs with RelatedResults. Tabs are shown based upon the key field
        */
       class MyDetailsAndRelated extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyDetailsAndRelated.ID);
     
           let $el = $(element);
           this.$parent = $el.parent();
     
           let $tabs = [$(`<div class="RelatedTab" data-name="Details" title="Details">&nbsp;</div>`)];
           let queries = [];
     
           $('.CoveoMyResultsRelated', this.$parent).each((i, el) => {
             let tabName = el.dataset.name;
     
             let fields = (el.dataset.fields || '').split(';');
     
             let skip = fields.length ? true : false; // default to false if no data-fields is set.
             fields.forEach(f => {
               // Validate that if we have data-fields set on a tab, the result has it.
               // For example, Don't show tab Music if there are no artist or song associated to a movie.
               if (result && result.raw && result.raw[f]) {
                 skip = false;
               }
             });
     
             //Fill the queries to check for results later on
             queries.push({ result: result, dataset: el.dataset, tab: tabName, parent: this.$parent });
             //Special for the Playing
             if (tabName === 'Playing') {
               //check if the releasedate is >3 months < today
               var resultdate = new Date(Date.parse(result.raw['date']));
               var monthsback = new Date();
               var today = new Date();
               monthsback.setMonth(monthsback.getMonth() - 5);
               if (resultdate > monthsback && resultdate < today) {
                 skip = false;
               } else {
                 skip = true;
               }
             }
             if (!skip) {
               //Check if there are results on the tab
               $tabs.push($(`<div class="RelatedTab" data-name="${tabName}" title="${tabName}">&nbsp;</div>`));
             }
           });
           //Check if we have results for each of the tabs
           this.checkQueries(queries);
     
           $el.prepend($tabs);
     
           this.result = result;
           this.$el = $el;
     
           $('.RelatedTab', $el).on('click', e => {
             $('.RelatedTab.active', $el).removeClass('active');
             $(e.target).addClass('active');
             let name = e.target.dataset.name;
             $('.related-content', this.$parent).hide();
     
             let $newTab = $('.related-content.' + name, this.$parent);
             if ($newTab.length) {
               $newTab.show();
               if (!$newTab.hasClass('query-done')) {
                 $newTab.addClass('query-done');
                 Coveo.$($newTab).coveo('showMoreResults');
               }
             }
           });
     
           $('.RelatedTab[data-name="Details"]', $el).addClass('active');
         }
     
         //***************************
         //composeQuery
         //  Creates a new query for the checkQuery function
         //***************************
         composeQuery(result, dataset) {
           let newquery = dataset.query;
           let a = dataset.fields.split(';');
           let i = 0;
           for (i = 0; i < a.length; i++) {
             let fieldcontent = result.raw[a[i]];
             if (fieldcontent) {
               fieldcontent = '' + fieldcontent; //make sure it's a string
               //Workaround for the bad title with the place in it
               fieldcontent = fieldcontent.replace(/\(.*\)/g, '');
               //Seems that if you format the field in the UI, it gets the formatted value
               fieldcontent = fieldcontent.replace(/[;()]/g, ' ');
               
               //Comma's must be replaced by ","
               fieldcontent = fieldcontent.replace(/,/g, '","');
               //In Elastic the : means a field query
               newquery = newquery.replace('[FIELD' + (i + 1) + ']', fieldcontent.replace(':', ' '));
             } else {
               newquery = newquery.replace('[FIELD' + (i + 1) + ']', '');
             }
           }
           //ugly but for now fine, you would normally do this in a IPE or just before indexing.
           newquery = newquery.replace('movie script - Screenplays for You', '');
           return newquery;
         }
     
         //***************************
         //checkQuery
         //  Checks the query for all the relatedTabs. Based upon the groupby fields the tab will be made visible or not
         //***************************
         checkQuery(fields, query, partial, dataset) {
           let queryBuilder = new Coveo.QueryBuilder();
           queryBuilder.locale = GetBindings().queryController.lastQueryBuilder.locale;
           queryBuilder.pipeline = 'default';
           queryBuilder.searchHub = 'CheckTabs';
           queryBuilder.enableDebug = false;
           queryBuilder.enableQuerySyntax = true;
           queryBuilder.enableDuplicateFiltering = false;
           queryBuilder.excerptLength = 200;
     
           queryBuilder.timezone = GetBindings().queryController.lastQueryBuilder.timezone;
           queryBuilder.numberOfResults = 0;
           queryBuilder.groupByRequests = fields;
     
           queryBuilder.expression.add(query);
           if (partial === 'true') {
             queryBuilder.enablePartialMatch = true;
             queryBuilder.partialMatchKeywords = 4;
             queryBuilder.partialMatchThreshold = '50%';
           }
           GetBindings()
             .queryController.getEndpoint()
             .search(queryBuilder.build())
             .done(function(data) {
               dataset.forEach(f => {
                 if (f.dataset.partialMatch === partial && f.dataset.keyCheck) {
                   //Check if we have the key in the result, if so enable the tab else disable it
                   let value = f.dataset.keyCheck.split(';')[1];
                   let found = false;
                   data.groupByResults.forEach(res => {
                     res.values.forEach(groupval => {
                       if (groupval.value.toLowerCase() === value.toLowerCase()) {
                         //We have it
                         found = true;
                       }
                     });
                   });
                   let $newTab = $('.RelatedTab[data-name="' + f.tab + '"]', f.parent);
                   if (found) {
                     $newTab.show();
                   } else {
                     $newTab.hide();
                   }
                 }
               });
             });
         }
     
         doWeHaveIt(tocheck, value) {
           let wehaveit = false;
           $.each(tocheck, function(index, obj) {
             if (obj.field === value) {
               wehaveit = true;
             }
           });
           return wehaveit;
         }
     
         //***************************
         //  checkQueries
         //  builds up the total query to execute for the relatedTabs
         //***************************
         checkQueries(queries) {
           // Partial match queries
           let checkQueriesWithPartialMatch = partialMatch => {
             let fields = [];
             let query = [];
     
             queries.forEach(f => {
               if (f.dataset.partialMatch === partialMatch && f.dataset.keyCheck) {
                 // Build a single query with an OR on all queries
                 // The key will be used to check if we have results
                 // Add keyfield to fields to retrieve
                 let field = f.dataset.keyCheck.split(';')[0];
                 if (!this.doWeHaveIt(fields, field)) {
                   fields.push({ field, sortCriteria: 'nosort' });
                 }
                 query.push('(' + this.composeQuery(f.result, f.dataset) + ')');
               }
             });
             if (query.length) {
               this.checkQuery(fields, query.join(' OR '), partialMatch, queries);
             }
           };
     
           checkQueriesWithPartialMatch('true');
           checkQueriesWithPartialMatch('false');
         }
       }
     
       MyDetailsAndRelated.ID = 'MyDetailsAndRelated';
       Coveo.Initialization.registerAutoCreateComponent(MyDetailsAndRelated);
     
       /* globals Coveo */
     
       /**
        * Music image
        * Show MusicImage
        */
       class MyMusicImage extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyMusicImage.ID);
     
           let divHtml = '<div class="noimagemusic" style="width:64px;height:64px"></div>'; // default
           if (result.raw.myimage) {
             divHtml = `<div class="myimage"><img src="//lastfm-img2.akamaized.net/i/u/64s/${result.raw.myimage}"></div>`;
           }
           Coveo.$(divHtml).appendTo(element);
         }
       }
       MyMusicImage.ID = 'MyMusicImage';
       Coveo.Initialization.registerAutoCreateComponent(MyMusicImage);
     
       /* globals Coveo */
     
       /**
        * ImageSmall
        * Render small image
        */
       class MyImageSmall extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyImageSmall.ID);
     
           let imagePath = result.raw.myimage;
           if (imagePath) {
             let imagesPerTypeMap = {
               Movie: `https://image.tmdb.org/t/p/w45${imagePath}`,
               Houses: `${imagePath}`,
               Music: `//lastfm-img2.akamaized.net/i/u/34s/${imagePath}`,
               Concert: `//images.sk-static.com/images/media/profile_images/artists/${imagePath}/avatar`,
               People: `https://image.tmdb.org/t/p/w66_and_h66_bestv2${imagePath}`,
               'Movie People': `https://image.tmdb.org/t/p/w66_and_h66_bestv2${imagePath}`
             };
             imagePath = imagesPerTypeMap[result.raw.mytype] || '';
           }
     
           let divHtml = imagePath ? `<div class="myimage"><img src="${imagePath}"></div>` : '<div class="noimage" style="width:34px;"></div>';
           Coveo.$(divHtml)
             .on('click', e => {
               $(e.target)
                 .closest('.CoveoQuickview')
                 .coveo('open');
             })
             .appendTo(element);
         }
       }
     
       MyImageSmall.ID = 'MyImageSmall';
       Coveo.Initialization.registerAutoCreateComponent(MyImageSmall);
     
       /* globals Coveo */
     
       const COOKIE_KEY$1 = 'cur_help';
     
       const getHelpFlagFromCookie = () => {
         return Coveo.Cookie.get(COOKIE_KEY$1) || 'false';
       };
     
       /**
        * Image result
        * Shows (external) image for Result
        */
       class MyHelpToggle extends Coveo.Component {
         constructor(element) {
           super(element, MyHelpToggle.ID);
           this.isActive = getHelpFlagFromCookie() === 'true';
           this.userHelp = '';
     
           Coveo.load('Checkbox').then(Checkbox => {
             const checkbox = new Checkbox(() => this.toggle(), 'Tooltips');
             if (this.isActive) {
               checkbox.select(false);
               this._setupMouseEvents();
             }
             this.element.appendChild(checkbox.build());
           });
         }
     
         _setupMouseEvents() {
           if (!this._eventsAdded) {
             // make sure we set them up once only.
             Coveo.$('[data-help]')
               .on('mouseover', e => {
                 if (this.isActive) {
                   let relatedElementId = $(e.currentTarget).data('help');
                   Coveo.$(relatedElementId).show();
                 }
               })
               .on('mouseout', e => {
                 let relatedElementId = $(e.currentTarget).data('help');
                 Coveo.$(relatedElementId).hide();
               });
             this._eventsAdded = true;
           }
         }
     
         toggle() {
           this.isActive = !this.isActive;
           Coveo.Cookie.set(COOKIE_KEY$1, this.isActive);
     
           Coveo.$('#debugHelp').toggle(this.isActive);
     
           if (this.isActive) {
             this._setupMouseEvents();
           }
         }
       }
     
       MyHelpToggle.ID = 'MyHelpToggle';
       Coveo.Initialization.registerAutoCreateComponent(MyHelpToggle);
     
       // Show help
       const onMouseOverHelp = elementId => {
         if (getHelpFlagFromCookie() === 'true') {
           Coveo.$(elementId).show();
         }
       };
     
       // Do not show help
       const onMouseOutHelp = elementId => {
         Coveo.$(elementId).hide();
       };
     
       /* globals Coveo, musicBoost */
     
       let _my_location_promise = null;
     
       let getLocation = () => {
         if (!_my_location_promise) {
           _my_location_promise = new Promise(resolve => {
             $.get(
               'https://ipinfo.io',
               response => {
                 let globalNear = [response.city, response.region, response.country].join(', ');
                 resolve(globalNear);
               },
               'jsonp'
             );
           });
         }
         return _my_location_promise;
       };
     
       /**
        * Results Related
        * Shows related results based upon the current result, a new query is executed
        */
       class MyResultsRelated extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MyResultsRelated.ID);
           this.showingMoreResults = false;
           this.result = result;
           this.options = Coveo.ComponentOptions.initComponentOptions(element, MyResultsRelated, options);
           $(element)
             .addClass('related-content ' + this.options.name)
             .hide();
     
           Coveo.Assert.exists(result);
           this.buildElements();
           this.updateElementVisibility();
           if (options.alwaysShow) {
             this.showMoreResults();
           }
         }
     
         buildElements() {
           let _this = this;
           _this.buildHeader();
           _this.buildResults();
         }
     
         showMoreResultsExternal() {
           getLocation().then(this._showMoreResultsExternal.bind(this));
         }
     
         _showMoreResultsExternal(globalnear) {
           //Getting results from an external source (NOT Coveo)
           //This is very tailored towards getting Movie Tickets from Google
           let _this = this;
           let newquery = this.options.query;
           let a = this.options.fields.split(';');
           let allfieldsmissing = true;
           for (let i = 0; i < a.length; i++) {
             let fieldcontent = this.result.raw[a[i]];
             let reFieldName = new RegExp(`\\[FIELD${i + 1}\\]`, 'g'); // to replace all [FIELD#]
     
             if (fieldcontent) {
               allfieldsmissing = false;
               fieldcontent = '' + fieldcontent; //make sure it's a string
               //Seems that if you format the field in the UI, it gets the formatted value
               //Workaround for the bad title with the place in it
               fieldcontent = fieldcontent.replace(/\(.*\)/g, '');
               fieldcontent = fieldcontent.replace(/[;()]/g, ' ');
               //Comma's must be replaced by ","
               fieldcontent = fieldcontent.replace(/,/g, '","');
               //In Elastic the : means a field query
               fieldcontent = fieldcontent.replace(':', ' ');
             }
             newquery = newquery.replace(reFieldName, fieldcontent || '');
           }
     
           if (allfieldsmissing) {
             // fieldcontent is invalid or missing, the query will return everything.
             // So we show "No related" instead.
             this.updateElementVisibility(0);
             return false;
           }
           var torender = '';
           var divtoget = this.options.divToGet;
           var titlecaption = this.options.titleCaption.replace('{LOC}', globalnear);
           var notitle = this.options.noResultsCaption.replace('{LOC}', globalnear);
           var results = this.results;
           newquery = newquery.replace('{LOC}', globalnear);
           Coveo.$(`<div class="movieloc"/>`)
             .html('Looking for movies near: ' + globalnear + ' in Google.')
             .appendTo(results);
           //var url = 'https://secret-ocean-49799.herokuapp.com/' + encodeURIComponent(newquery) + '';//'http://www.whateverorigin.org/get?url=' + encodeURIComponent(newquery) + '';
           var url = 'https://cors-anywhere.herokuapp.com/' + (newquery) + '';//'http://www.whateverorigin.org/get?url=' + encodeURIComponent(newquery) + '';
           $.get(url, function(response) {
             var xpath = divtoget.split(';');
             // var json=$.parseJSON(response.contents);
             var html = $('<html>').html(response);//response.contents);
             var dates = $(xpath[0], html);
             torender = '';
             if (dates.length >= 1) {
               //dates.first(r=>{
               //torender+="<tr width=300px><td colspan=2>"+$(dates[r]).find('div').first().attr('data-date')+"</td></tr>";
               //Location name
               var locs = $(dates[0]).find(xpath[1]);
               locs.each(l => {
                 let $loc = $(locs[l]).find(xpath[2]);
                 torender += `<tr width="300px"><td>
         <a target="_blank" class="smallhref" href="https://www.google.com/${$loc.attr('href')}">${$loc.text()}</a>
     </td><td>`;
                 //View times
                 var times = $(locs[l]).find(xpath[3]);
                 times.each(t => {
                   torender += '' + times[t].innerText + '&nbsp;&nbsp;';
                 });
                 torender += '</td></tr>';
               });
               //});
             }
             //torender = getElementsByXPath( xpath[0], html);
     
             //console.log(torender);
             if (torender) {
               _this.showingMoreResults = true;
               _this.updateElementVisibility(1);
               this.showExpand = Coveo.$(`<div class="movieplay"/>`)
                 .html(
                   `${titlecaption}<br><table cellpadding="3"><th style="text-align: left;">Cinema</th><th style="text-align: left;">Showtimes</th>${torender}</table>`
                 )
                 .appendTo(results);
             } else {
               _this.updateElementVisibility(0);
               _this.results.empty();
               this.noResultsCaption = Coveo.$('<div/>')
                 .addClass('coveo-folding-header-caption')
                 .html(notitle)
                 .appendTo(results);
             }
           });
         }
     
         showMoreResults() {
           let _this = this;
           this.updateElementVisibility();
           this.showingMoreResults = true;
           if (this.options.keyCheck) {
             let queryBuilder = new Coveo.QueryBuilder();
             //Copy settings from last Query Builder
             let binding = GetBindings();
             queryBuilder.locale = binding.queryController.lastQueryBuilder.locale;
             queryBuilder.pipeline = binding.queryController.lastQueryBuilder.pipeline;
             queryBuilder.searchHub = binding.queryController.lastQueryBuilder.searchHub;
             queryBuilder.sortCriteria = binding.queryController.lastQueryBuilder.sortCriteria;
             queryBuilder.enableDebug = binding.queryController.lastQueryBuilder.enableDebug;
             queryBuilder.enableQuerySyntax = true;
             queryBuilder.enableDuplicateFiltering = true;
             queryBuilder.excerptLength = binding.queryController.lastQueryBuilder.excerptLength;
     
             queryBuilder.timezone = binding.queryController.lastQueryBuilder.timezone;
             queryBuilder.numberOfResults = this.options.numberOfResults;
             let newquery = this.options.query;
             let a = this.options.fields.split(';');
             let i = 0;
             this.expandedComment = this.options.expandedComment;
             this.expandedQuery = this.options.expandedQuery;
             let allfieldsmissing = true;
             for (i = 0; i < a.length; i++) {
               let fieldcontent = this.result.raw[a[i]];
               let reFieldName = new RegExp(`\\[FIELD${i + 1}\\]`, 'g'); // to replace all [FIELD#]
     
               let fieldExpr = '';
               let fieldExprES = '';
               if (fieldcontent) {
                 allfieldsmissing = false;
                 fieldcontent = '' + fieldcontent; //make sure it's a string
     //Workaround for the bad title with the place in it
     fieldcontent = fieldcontent.replace(/\(.*\)/g, '');
                 //Seems that if you format the field in the UI, it gets the formatted value
                 fieldExpr = fieldcontent.replace(/[;()]/g, ' ');
     
                 //In Elastic the : means a field query
                 fieldExprES = fieldExpr.replace(':', ' ');
                 //Comma's must be replaced by ","
                 fieldExprES = fieldcontent.replace(/,/g, '","');
               }
               //In Elastic the : means a field query
               newquery = newquery.replace(reFieldName, fieldExprES);
               this.expandedQuery = this.expandedQuery.replace(reFieldName, fieldExprES);
               this.expandedComment = this.expandedComment.replace(reFieldName, fieldExpr);
             }
             if (allfieldsmissing) {
               // fieldcontent is invalid or missing, the query will return everything.
               // So we show "No related" instead.
               this.updateElementVisibility(0);
               return false;
             }
             if (this.options.filterField) {
               queryBuilder.filterField = this.options.filterField;
             }
             if (this.result.state) {
               newquery = newquery.replace('[QUERY]', this.result.state['q']);
               this.expandedQuery = this.expandedQuery.replace('[QUERY]', this.result.state['q']);
             }
             //ugly but for now fine
             newquery = newquery.replace('movie script - Screenplays for You', '');
             this.expandedQuery = this.expandedQuery.replace('movie script - Screenplays for You', '');
     
             if (this.options.extraBoost && window.musicBoost) {
               // TODO - Move musicBoost in a Global User object
               queryBuilder.expression.add(newquery + musicBoost);
               _this.expandquery = newquery + musicBoost;
             } else {
               queryBuilder.expression.add(newquery);
               _this.expandquery = this.expandedQuery || newquery;
             }
             if (this.options.partialMatch) {
               queryBuilder.enablePartialMatch = true;
               queryBuilder.partialMatchKeywords = 4;
               queryBuilder.partialMatchThreshold = '50%';
             }
             GetBindings()
               .queryController.getEndpoint()
               .search(queryBuilder.build())
               .done(function(data) {
                 _this.showingMoreResults = true;
                 _this.updateElementVisibility(data.results.length);
                 _this.displayThoseResults(data.results);
                 //return !data.results.length === 0;
               });
           } else {
             _this.showMoreResultsExternal();
           }
         }
     
         expandQuery() {
           Coveo.$('.CoveoFacet').coveo('reset');
           Coveo.$('#search').coveo('state', 'hd', this.expandedComment);
           Coveo.$('#search').coveo('state', 'hq', this.expandquery);
           Coveo.$('#search').coveo('state', 'q', '');
           //Seems we are not executing analytics if we call executeQuery directly
           var customEventCause = { name: 'expand ' + this.options.name, type: 'search box' };
           Coveo.$('#search').coveo('logSearchEvent', customEventCause, {});
           Coveo.$('#search').coveo('executeQuery');
         }
     
         buildHeader() {
           this.header = Coveo.$('<div/>')
             .addClass('coveo-folding-header')
             .appendTo(this.element);
         }
         buildResults() {
           this.results = Coveo.$('<div/>')
             .addClass('coveo-folding-results2')
             .appendTo(this.header);
           this.noResultsCaption = Coveo.$('<div/>')
             .addClass('coveo-folding-header-caption')
             .text(this.options.noResultsCaption)
             .appendTo(this.results);
         }
         updateElementVisibility(subResultsLength) {
           this.noResultsCaption.hide();
           if (subResultsLength === 0) {
             this.noResultsCaption.show();
           }
         }
     
         scrollToResultElement() {
           Coveo.$(window).scrollTop(
             Coveo.$(this.element)
               .closest('.CoveoResult')
               .position().top
           );
         }
     
         displayThoseResults(results) {
           let _this = this;
           this.results.empty();
           if (results.length === 0) {
             this.noResultsCaption = Coveo.$('<div/>')
               .addClass('coveo-folding-header-caption')
               .text(this.options.noResultsCaption)
               .appendTo(this.results);
           } else {
             this.showExpand = Coveo.$(`<div class="coveo-folding-footer-section-for-less"/>`).click(_this.expandQuery.bind(_this));
     
             let help = this.options.help;
             if (help) {
               this.showExpand.hover(onMouseOverHelp.bind(null, help), onMouseOutHelp.bind(null, help));
             }
     
             let $a = Coveo.$(`<a class="coveo-folding-show-more">Expand to: ${this.expandedComment}</a>`);
             this.showExpand.append($a);
     
             this.showExpand.appendTo(this.results);
           }
           Coveo._.each(results, function(result) {
             result.raw.collection = result.raw.collection || 'default';
             _this.renderChildResult(result);
           });
         }
     
         renderChildResult(childResult) {
           let binding = GetBindings();
           Coveo.QueryUtils.setStateObjectOnQueryResult(binding.queryStateModel.get(), childResult);
           Coveo.QueryUtils.setSearchInterfaceObjectOnQueryResult(binding.searchInterface, childResult);
     
           let addToContainer = (container, childResult) => {
             if (container) {
               this.autoCreateComponentsInsideResult(container, childResult);
               Coveo.$(container).addClass('coveo-result-attachments-container CoveoResult');
               this.results.append(container);
             }
           };
     
           let containerOrPromise = this.options.resultTemplate.instantiateToElement(childResult); // Promise on JSUI2 ?
           if (containerOrPromise && containerOrPromise.then) {
             containerOrPromise.then(container => {
               addToContainer(container, childResult);
             });
           } else {
             addToContainer(containerOrPromise, childResult);
           }
         }
     
         autoCreateComponentsInsideResult(element, result) {
           Coveo.Assert.exists(element);
           let initOptions = GetBindings().searchInterface.options;
           let initParameters = { options: initOptions, bindings: GetBindings(), result: result };
           Coveo.CoveoJQuery.automaticallyCreateComponentsInside(element, initParameters);
         }
       }
     
       MyResultsRelated.ID = 'MyResultsRelated';
       MyResultsRelated.options = {
         resultTemplate: Coveo.ComponentOptions.buildTemplateOption({
           defaultFunction: function() {
             return new Coveo.DefaultResultTemplate();
           }
         }),
         name: Coveo.ComponentOptions.buildLocalizedStringOption(),
         label: Coveo.ComponentOptions.buildLocalizedStringOption(),
         normalCaption: Coveo.ComponentOptions.buildLocalizedStringOption(),
         titleCaption: Coveo.ComponentOptions.buildLocalizedStringOption(),
         expandedComment: Coveo.ComponentOptions.buildLocalizedStringOption(),
         expandedQuery: Coveo.ComponentOptions.buildStringOption({ defaultValue: '' }),
         help: Coveo.ComponentOptions.buildStringOption({ defaultValue: '' }),
         expandedCaption: Coveo.ComponentOptions.buildLocalizedStringOption(),
         noResultsCaption: Coveo.ComponentOptions.buildLocalizedStringOption(),
         query: Coveo.ComponentOptions.buildStringOption(), // The Advanced query to execute, fields are noted as [FIELD1][FIELD2] from the fields section
         fields: Coveo.ComponentOptions.buildStringOption(), // The fields to use from the current result
         filterField: Coveo.ComponentOptions.buildStringOption(),
         keyCheck: Coveo.ComponentOptions.buildStringOption({ defaultValue: '' }),
         divToGet: Coveo.ComponentOptions.buildStringOption({ defaultValue: '' }),
         numberOfResults: Coveo.ComponentOptions.buildNumberOption(),
         partialMatch: Coveo.ComponentOptions.buildBooleanOption({ defaultValue: false }),
         extraBoost: Coveo.ComponentOptions.buildBooleanOption({ defaultValue: false }),
         alwaysShow: Coveo.ComponentOptions.buildBooleanOption({ defaultValue: false }),
         indent: Coveo.ComponentOptions.buildNumberOption()
       };
     
       Coveo.Initialization.registerAutoCreateComponent(MyResultsRelated);
     
       /* globals Coveo */
     
       /**
        * ART result
        * Is triggered when ART (Machine Learning) is kicking in
        */
       class MySentiment extends Coveo.Component {
         constructor(element, options, bindings, result) {
           super(element, MySentiment.ID);
     
           let sentiment = result.raw['mysentimentvalue'];
           if (sentiment) {
             let cssClass = ('mysentiment-' + sentiment).replace(/\s+/g, '-');
             Coveo.$(`<div class="mysentiment ${cssClass}" title="Sentiment: ${sentiment}">&nbsp;</div>`).appendTo(this.element);
           }
         }
       }
     
       MySentiment.ID = 'MySentiment';
       Coveo.Initialization.registerAutoCreateComponent(MySentiment);
      });
    </script>
  </head>


<body id="search" class='CoveoSearchInterface' data-pipeline='Search' data-enable-history="true" data-auto-trigger-query="true" data-debug=true data-expression="" data-results-per-page='100'>
    <img class="CoveoLogoOverlay" src="https://www.kayee.nl/wp-content/uploads/2016/05/coveo-logo.png" />
    <div class='CoveoAnalytics'></div>
    <div class="CoveoMapWraper">
        <div class="CoveoGeoHashMap" id="CoveoGeoHashMap" data-lat-field="mylat" data-lon-field="mylon" data-template-id="MovieTemplate"></div>
    </div>
    <div class='coveo-search-section-wrapper'>
        <div class='coveo-search-section'>
            <div class="CoveoSearchbox" data-enable-omnibox="true" data-placeholder="" data-enable-query-syntax="true">
                <span class="CoveoFieldSuggestions" data-field='@mygenre' data-header-title="Genre"></span>
                <span class="CoveoFieldSuggestions" data-field='@mycast' data-header-title="Cast"></span>
            </div>
        </div>
        <div style="display:block">
          <div id="myprecision" style="display:inline-block;padding:5px;color:red;background-color:yellow;font-size:0.8em"></div>
          <div id="myquery" style="display:inline-block;padding:5px;color:red;background-color:yellow;font-size:0.8em"></div>
        </div>

    </div>
    <div class="coveo-main-section">
        <div class="coveo-facet-column">
            <div class="CoveoFacet" data-title="Country" data-field="@mycountry" data-injection-depth=15000></div>
          <div class="CoveoFacet" data-title="Neighbourhood" data-field="@myneighbourhood" data-computed-field="@myprice" data-computed-field-operation="average"
          data-computed-field-format="c0" data-computed-field-caption="Avg Price"></div>
          
        <div class="CoveoCategoryFacet" data-title="Type" data-field="@myroomprop"></div>
        <div class="CoveoFacet" data-title="City" data-field="@mycity" data-tab="ToSee"></div>
        <div class="CoveoFacet" data-title="Used By Traveller" data-field="@myratingtype" ></div>
        <div class="CoveoFacet" data-title="Used By Age" data-field="@myratingage" ></div>
        <div class="CoveoFacet" data-title="Used By Rating" data-field="@myrating" ></div>
        <div class="CoveoFacet" data-title="Amenities" data-field="@myamenities" ></div>
        <div class="CoveoFacet" data-title="Bed type" data-field="@mybedtype" ></div>
        <div class="CoveoFacet" data-title="No of Persons" data-field="@mynopersons" ></div>
        <div class="CoveoFacet" data-title="No of Bedrooms" data-field="@mybedroomsf" ></div>
        <div class="CoveoFacet" data-title="No of Beds" data-field="@mybedsf" ></div>
          </div>
        <div class="coveo-results-column">
            <a class="CoveoTab" data-id="default" data-caption="All" data-expression="@uri"></a>
            <a class="CoveoTab" data-id="Neighboorhoods" data-caption="Neighboorhoods" data-expression="@objecttype==Neighboorhood" data-pipeline=default></a>
            <a class="CoveoTab" data-id="ToSee" data-caption="Explore" data-expression="@source==Attractions" data-pipeline=default></a>
            <a class="CoveoTab" data-id="News" data-caption="News" data-expression="@documenttype==Article" data-pipeline=default></a>
            <div class="CoveoBreadcrumb"></div>
            <div class="coveo-results-header">
                <div class="coveo-summary-section">
                    <span class="CoveoQuerySummary"></span>
                    <span class="CoveoQueryDuration"></span>
                </div>
                <div class="CoveoHiddenQuery"></div>
                <div class="CoveoDidYouMean"></div>
                <div class="CoveoErrorReport"></div>
                <div class="CoveoResultsPerPage"></div>
                <div class="coveo-sort-section">
                    <span class="CoveoSort" data-sort-criteria="relevancy" data-caption="Relevance"></span>
                    <span class="CoveoSort" data-sort-criteria="@myvotecount descending, @myvotecount ascending" data-caption="Votes"></span>
                  </div>
            </div>
            <div class="CoveoFacetSlider" data-title="Price Range" data-graph="true" data-start=1 data-end=400 data-graph-steps=60  data-range-slider='true' data-field="@myprice" data-date-field="false" ></div>
            <div class="CoveoResultList" data-layout="list">
                  <script id="MovieTemplate" class="result-template" type="text/html" data-layout="list" data-field-mytype="Houses">
                    <div class="coveo-result-frame movie" style="padding-left:5px;padding-top: 5px;">
                      <div style="float: left; display: inline-block; width: 20%;padding-right: 10px;">
                      <span class="CoveoMyImage" data-show-poster="true"></span>
                      </div>
                      <div style="display: inline-block; width: 80%;">
                      <div class="result-float-right role-based-text-color">
                        <span class="CoveoFieldValue" data-field="@date" data-helper="date"></span>
                        <span class="CoveoMySentiment"></span>
                        <div class="CoveoQuickview" data-template-id="HouseQuickview"></div>
                        <div class="CoveoFieldValue" data-field="@myvotecount" data-text-caption="★" style="display:block"></div>
               
                        <div class="CoveoFieldValue" data-field="@myprice" data-text-caption="Price:" style="display:block"></div>
                        
                        <div class="CoveoMyFeatured"></div>
                        <div class="CoveoMyART"></div>
                      </div>
                      <a class="CoveoResultLink"></a>
          
                      <div class="CoveoExcerpt"></div>
          
                      <div class="CoveoStarRating" data-rating-field="@myvotecount" data-rating-scale=100></div>
                        <table class="CoveoFieldTable coveo-details related-content Details query-done" data-allow-minimization="false">
                          <tr data-field="@myproptype" data-caption="Property type"></tr>
                          <tr data-field="@myroomtype" data-caption="Room type"></tr>
                          <tr data-field="@mybedtype" data-caption="Bed type"></tr>
                          <tr data-field="@myamenities" data-caption="Amenities" data-split-values="true"></tr>
                         
                        </table>
                        
                      </div>
                    </div>
          
                  </script>

                  <script id="YouTubeVideoList" class="result-template" type="text/html" data-layout="list" data-field-filetype="YouTubeVideo">
                    <div class="coveo-result-frame notop" style="min-height: 150px; padding: 8px 10px 10px 10px; border-top-left-radius: 6px; overflow: hidden;">
                      <div style="float: left; padding:0 12px 0 0; margin-left: -2px;">
                        <span class="CoveoYouTubeThumbnail"></span>
                        <div style="padding-left: 10px; font-size: 12px; margin:0.25em 0 0.25em 10px;">
                          <span class="CoveoFieldValue" data-field="@ytvideoduration" data-helper="timeSpan" data-helper-options-is-milliseconds="false"></span>
                          <span class="CoveoText" data-value="•"></span>
                          <span class="CoveoFieldValue" data-field="@ytviewcount"></span>
                          <span class="CoveoText" data-value="views"></span>
                        </div>
                      </div>
          
                      <div class="coveo-result-cell" style="float:right; text-align:right; width:120px;font-size:12px">
                        <span class="CoveoFieldValue" data-field="@date" data-helper="dateTime"></span>
                        <span class="CoveoMyFeatured"></span>
                        <span class="CoveoMyART"></span>
                      </div>
                      <a class="CoveoResultLink" style="display: block; min-width: 120px;
                      overflow: hidden;
                      text-overflow: ellipsis;"></a>
                      <div class="CoveoExcerpt"></div>
                    </div>
                  </script>
                  <!-- YouTubeVideoList-->
                  <script id="Default" class="result-template" type="text/html" data-layout="list">
                    <div class="coveo-result-frame movie" style="padding-left:5px;padding-top: 5px;">
                      <div style="float: left; display: inline-block; width: 20%;padding-right: 10px;">
                      <span class="CoveoMyImage" data-show-poster="true"></span>
                      </div>
                      <div style="display: inline-block; width: 80%;">
                      <div class="result-float-right role-based-text-color">
                        <span class="CoveoFieldValue" data-field="@date" data-helper="date"></span>
                        <span class="CoveoMySentiment"></span>
                        <div class="CoveoQuickview"></div>
                        <div class="CoveoFieldValue" data-field="@myvotecount" data-text-caption="★" style="display:block"></div>
               
                        <div class="CoveoFieldValue" data-field="@myprice" data-text-caption="Price:" style="display:block"></div>
                        
                        <div class="CoveoMyFeatured"></div>
                        <div class="CoveoMyART"></div>
                      </div>
                      <a class="CoveoResultLink"></a>
          
                      <div class="CoveoExcerpt"></div>
          
                      
                        <table class="CoveoFieldTable coveo-details related-content Details query-done" data-allow-minimization="false">
                          <tr data-field="@myproptype" data-caption="Property type"></tr>
                          <tr data-field="@myroomtype" data-caption="Room type"></tr>
                          <tr data-field="@mybedtype" data-caption="Bed Type"></tr>
                          <tr data-field="@myamenities" data-caption="Amenities" data-split-values="true"></tr>
                         
                        </table>
                        <div class="CoveoStarRating" data-rating-field="@myvotecount" data-rating-scale=100></div>
                      </div>
                    </div>
          
                  </script>
                  <script id="HouseQuickview" class="result-template" type="text/html" >
                      <div class="coveo-quick-view-full-height">
                        <div class="coveo-quick-view-header">
                        </div>
                        <div class="CoveoQuickviewDocument" style="height:50%"></div>
                        <div class="CoveoMyDetailsAndRelated">
                            <table class="CoveoFieldTable coveo-details related-content Details query-done" data-allow-minimization="false">
                              <tr data-field="@mystatus" data-caption="Status"></tr>
                              <tr data-field="@myroomtype" data--caption="Production Countries"></tr>
                              <tr data-field="@mygenre" data-caption="Genres"></tr>
                              <tr data-field="@myrelatedartist" data-caption="Soundtrack (artists)" data-split-values="true"></tr>
                              <tr data-field="@myrelatedsongs" data-caption="Soundtrack (songs)"></tr>
                            </table>
                          </div>
                          
                          <div class="CoveoMyResultsRelated Attractions" data-result-template-id="Default" data-name="Attractions" data-normal-caption="Attractions"
                            data-title-caption="Related attractions (based upon city)" data-expanded-caption="Hide Related Attractions" data-no-results-caption="No related attractions found"
                            data-query='@mycity="[FIELD1]" @source==Attractions' data-key-check='@source;Attractions' data-expanded-comment="Show Attractions where city is '[FIELD1]'"
                            data-extra-boost=false data-fields="mycity" data-partial-match=false data-number-Of-Results=5 data-help=''>
                          </div>
              
                          <div class="CoveoMyResultsRelated News" data-result-template-id="Default" data-name="News" data-normal-caption="News" data-title-caption="Related news (based upon country)"
                            data-expanded-caption="Hide Related News" data-no-results-caption="No related news found" data-query='@mycountry="[FIELD1]" @documenttype==Article'
                            data-key-check='@documenttype;Article' data-expanded-comment="Show News with country: [FIELD1] "
                            data-extra-boost=false data-fields="mycountry" data-filter-field="" data-partial-match=false
                            data-number-Of-Results=5 data-help=''>
                          </div>
                      </div>
                  </script>
            </div>
            <div class="CoveoPager"></div>
        </div>
    </div>

</body>

</html>